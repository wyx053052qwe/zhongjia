/*
 * FilePondPluginFileValidateType 1.2.1
 * Licensed under MIT, https://opensource.org/licenses/MIT
 * Please visit https://pqina.nl/filepond for details.
 */

/* eslint-disable */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.FilePondPluginFileValidateType=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils,i=n.Type,o=n.isString,a=n.replaceInString,l=n.guesstimateMimeType,u=n.getExtensionFromFilename,r=n.getFilenameFromURL,_=function(e,n){return e.some(function(e){return/\*$/.test(e)?(t=e,(/^[^/]+/.exec(n)||[]).pop()===t.slice(0,-2)):e===n;var t})},c=function(e,i,T){if(0===i.length)return!0;var E=function(e){var t="";if(o(e)){var n=r(e),i=u(n);i&&(t=l(i))}else t=e.type;return t}(e);return T?new Promise(function(t,n){T(e,E).then(function(e){_(i,e)?t():n()}).catch(n)}):_(i,E)};return t("SET_ATTRIBUTE_TO_OPTION_MAP",function(e){return Object.assign(e,{accept:"acceptedFileTypes"})}),t("ALLOW_HOPPER_ITEM",function(e,t){var n=t.query;return!n("GET_ALLOW_FILE_TYPE_VALIDATION")||c(e,n("GET_ACCEPTED_FILE_TYPES"))}),t("LOAD_FILE",function(o,e){var l=e.query;return new Promise(function(e,n){if(l("GET_ALLOW_FILE_TYPE_VALIDATION")){var i=l("GET_ACCEPTED_FILE_TYPES"),t=l("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),T=c(o,i,t),E=function(){var t,e=i.map((t=l("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"),function(e){return null!==t[e]&&(t[e]||e)})).filter(function(e){return!1!==e});n({status:{main:l("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:a(l("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:e.join(", "),allButLastType:e.slice(0,-1).join(", "),lastType:e[e.length-1]})}})};if("boolean"==typeof T)return T?e(o):E();T.then(function(){e(o)}).catch(E)}else e(o)})}),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});